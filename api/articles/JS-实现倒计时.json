{"title":"JS 实现倒计时","slug":"JS-实现倒计时","date":"2017-03-21T13:58:21.000Z","updated":"2019-09-20T01:17:19.702Z","comments":true,"path":"api/articles/JS-实现倒计时.json","excerpt":"利用 window.setInterval() 实现倒计时示例：1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>var id;<br>var interval = 1000; <br><br>/**<br> * @param year 结束日期的年<br> * @param month 结束日期的月<br> * @param day 结束日期的日<br> * @param divname 需做出响应的元素id<br> */<br>function ShowCountDown(year,month,day,divname) &#123; <br>\t// 设置结束日期<br>\tvar endDate = new Date(year, month-1, day); <br>\t// 获取当前日期<br>\tvar now = new Date(); <br>\t// 计算剩余毫秒数<br>\tvar leftTime=endDate.getTime()-now.getTime(); <br>\t// 计算剩余秒数<br>\tvar leftsecond = parseInt(leftTime/1000); <br>\t// 剩余天数（整数倍）<br>\tvar day1=Math.floor(leftsecond/(60*60*24)); <br>\t// 剩余小时数（除去大单位后整数倍）<br>\tvar hour=Math.floor((leftsecond-day1*24*60*60)/3600); <br>\t// 剩余分钟数（除去大单位后整数倍）<br>\tvar minute=Math.floor((leftsecond-day1*24*60*60-hour*3600)/60); <br>\t// 剩余秒数（除去大单位后整数倍）<br>\tvar second=Math.floor(leftsecond-day1*24*60*60-hour*3600-minute*60); <br><br>\tvar cc = document.getElementById(divname); <br>\tcc.innerHTML = \"距离\" + year + \"年\" + month + \"月\" + day + \"日还有：\" + day1 + \"天\" + hour + \"小时\" + minute + \"分\" + second + \"秒\"; <br>&#125; <br><br>/**<br> * 开始倒计时<br> */<br>function start()&#123;<br>\tid = window.setInterval( function() &#123;<br><br>\t\t\tShowCountDown(2023,8,7,'divdown1');<br><br>\t\t&#125;, interval); <br>&#125;<br><br>/**<br> * 停止倒计时<br> */<br>function stop()&#123;<br>\tif (id) &#123;<br>\t\twindow.clearInterval(id);<br>\t&#125;<br>&#125;<br>","covers":null,"content":"<h3 id=\"利用-window-setInterval-实现倒计时\"><a href=\"#利用-window-setInterval-实现倒计时\" class=\"headerlink\" title=\"利用 window.setInterval() 实现倒计时\"></a>利用 window.setInterval() 实现倒计时</h3><h4 id=\"示例：\"><a href=\"#示例：\" class=\"headerlink\" title=\"示例：\"></a><em>示例：</em></h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> id;</span><br><span class=\"line\"><span class=\"keyword\">var</span> interval = <span class=\"number\">1000</span>; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * @param year 结束日期的年</span></span><br><span class=\"line\"><span class=\"comment\"> * @param month 结束日期的月</span></span><br><span class=\"line\"><span class=\"comment\"> * @param day 结束日期的日</span></span><br><span class=\"line\"><span class=\"comment\"> * @param divname 需做出响应的元素id</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ShowCountDown</span>(<span class=\"params\">year,month,day,divname</span>) </span>&#123; </span><br><span class=\"line\">\t<span class=\"comment\">// 设置结束日期</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> endDate = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(year, month<span class=\"number\">-1</span>, day); </span><br><span class=\"line\">\t<span class=\"comment\">// 获取当前日期</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(); </span><br><span class=\"line\">\t<span class=\"comment\">// 计算剩余毫秒数</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> leftTime=endDate.getTime()-now.getTime(); </span><br><span class=\"line\">\t<span class=\"comment\">// 计算剩余秒数</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> leftsecond = <span class=\"built_in\">parseInt</span>(leftTime/<span class=\"number\">1000</span>); </span><br><span class=\"line\">\t<span class=\"comment\">// 剩余天数（整数倍）</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> day1=<span class=\"built_in\">Math</span>.floor(leftsecond/(<span class=\"number\">60</span>*<span class=\"number\">60</span>*<span class=\"number\">24</span>)); </span><br><span class=\"line\">\t<span class=\"comment\">// 剩余小时数（除去大单位后整数倍）</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> hour=<span class=\"built_in\">Math</span>.floor((leftsecond-day1*<span class=\"number\">24</span>*<span class=\"number\">60</span>*<span class=\"number\">60</span>)/<span class=\"number\">3600</span>); </span><br><span class=\"line\">\t<span class=\"comment\">// 剩余分钟数（除去大单位后整数倍）</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> minute=<span class=\"built_in\">Math</span>.floor((leftsecond-day1*<span class=\"number\">24</span>*<span class=\"number\">60</span>*<span class=\"number\">60</span>-hour*<span class=\"number\">3600</span>)/<span class=\"number\">60</span>); </span><br><span class=\"line\">\t<span class=\"comment\">// 剩余秒数（除去大单位后整数倍）</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> second=<span class=\"built_in\">Math</span>.floor(leftsecond-day1*<span class=\"number\">24</span>*<span class=\"number\">60</span>*<span class=\"number\">60</span>-hour*<span class=\"number\">3600</span>-minute*<span class=\"number\">60</span>); </span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> cc = <span class=\"built_in\">document</span>.getElementById(divname); </span><br><span class=\"line\">\tcc.innerHTML = <span class=\"string\">\"距离\"</span> + year + <span class=\"string\">\"年\"</span> + month + <span class=\"string\">\"月\"</span> + day + <span class=\"string\">\"日还有：\"</span> + day1 + <span class=\"string\">\"天\"</span> + hour + <span class=\"string\">\"小时\"</span> + minute + <span class=\"string\">\"分\"</span> + second + <span class=\"string\">\"秒\"</span>; </span><br><span class=\"line\">&#125; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 开始倒计时</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\tid = <span class=\"built_in\">window</span>.setInterval( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tShowCountDown(<span class=\"number\">2023</span>,<span class=\"number\">8</span>,<span class=\"number\">7</span>,<span class=\"string\">'divdown1'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;, interval); </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 停止倒计时</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stop</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (id) &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">window</span>.clearInterval(id);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n<h3 id=\"window-setInterval-注解\"><a href=\"#window-setInterval-注解\" class=\"headerlink\" title=\"window.setInterval() 注解\"></a>window.setInterval() 注解</h3><h4 id=\"1-window-setInterval\"><a href=\"#1-window-setInterval\" class=\"headerlink\" title=\"1. window.setInterval()\"></a>1. <code>window.setInterval()</code></h4><p><strong>功能：</strong><br>按照指定的周期（以毫秒计）来调用函数或计算表达式。<br><strong>语法：</strong><br><code>setInterval(code,millisec)</code><br><strong>参数：</strong><br>code: 在定时时间到时要执行的JavaScript代码串。<br>millisec: 设定的定时时间，用毫秒数表示。<br><strong>返回值：</strong><br>定时器的ID值，可用于clearInterval()方法停止指定的定时器。<br><strong>注：</strong><br>setInterval()方法会不停地调用函数，直到用clearInterval()终止定时或窗口被关闭。</p>\n<h4 id=\"2-window-clearInterval\"><a href=\"#2-window-clearInterval\" class=\"headerlink\" title=\"2. window.clearInterval()\"></a>2. <code>window.clearInterval()</code></h4><p><strong>功能：</strong><br>取消由 setInterval() 方法设置的定时器。<br><strong>语法：</strong><br><code>clearInterval(id_of_setinterval)</code><br><strong>参数：</strong><br>id_of_setinterval: 由 setInterval() 返回的 id 值。该值标识了一个 setInterval 定时器。<br>也就是：window.setInterval() 返回的就是 window.clearInterval() 的参数</p>\n","more":"<h3 id=\"window-setInterval-注解\"><a href=\"#window-setInterval-注解\" class=\"headerlink\" title=\"window.setInterval() 注解\"></a>window.setInterval() 注解</h3><h4 id=\"1-window-setInterval\"><a href=\"#1-window-setInterval\" class=\"headerlink\" title=\"1. window.setInterval()\"></a>1. <code>window.setInterval()</code></h4><p><strong>功能：</strong><br>按照指定的周期（以毫秒计）来调用函数或计算表达式。<br><strong>语法：</strong><br><code>setInterval(code,millisec)</code><br><strong>参数：</strong><br>code: 在定时时间到时要执行的JavaScript代码串。<br>millisec: 设定的定时时间，用毫秒数表示。<br><strong>返回值：</strong><br>定时器的ID值，可用于clearInterval()方法停止指定的定时器。<br><strong>注：</strong><br>setInterval()方法会不停地调用函数，直到用clearInterval()终止定时或窗口被关闭。</p>\n<h4 id=\"2-window-clearInterval\"><a href=\"#2-window-clearInterval\" class=\"headerlink\" title=\"2. window.clearInterval()\"></a>2. <code>window.clearInterval()</code></h4><p><strong>功能：</strong><br>取消由 setInterval() 方法设置的定时器。<br><strong>语法：</strong><br><code>clearInterval(id_of_setinterval)</code><br><strong>参数：</strong><br>id_of_setinterval: 由 setInterval() 返回的 id 值。该值标识了一个 setInterval 定时器。<br>也就是：window.setInterval() 返回的就是 window.clearInterval() 的参数</p>","categories":[],"tags":[{"name":"JavaScript","path":"api/tags/JavaScript.json"}]}