{"title":"Android 下载安装APK","slug":"android下载安装APK","date":"2017-03-29T17:11:28.000Z","updated":"2019-09-20T06:53:58.939Z","comments":true,"path":"api/articles/android下载安装APK.json","excerpt":null,"covers":null,"content":"<h3 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h3><p>未整理完，暂且不写，日后更新</p>\n<h3 id=\"安装应用\"><a href=\"#安装应用\" class=\"headerlink\" title=\"安装应用\"></a>安装应用</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 安装 APK</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> activity</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileUri 安装包地址</span></span><br><span class=\"line\"><span class=\"comment\">     * fileUri = Uri.parse(\"file://\" + filePath); 或</span></span><br><span class=\"line\"><span class=\"comment\">     * fileUri = Uri.fromFile(File file);</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">installApk</span><span class=\"params\">(Activity activity, Uri fileUri)</span> </span>&#123;</span><br><span class=\"line\">        Intent intent = <span class=\"keyword\">new</span> Intent();</span><br><span class=\"line\">        <span class=\"comment\">//执行动作</span></span><br><span class=\"line\">        intent.setAction(Intent.ACTION_VIEW);</span><br><span class=\"line\">        <span class=\"comment\">// 如果不加无法正常显示安装过程和安装成功提示</span></span><br><span class=\"line\">        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class=\"line\">        <span class=\"comment\">//执行的数据类型</span></span><br><span class=\"line\">        intent.setDataAndType(fileUri, <span class=\"string\">\"application/vnd.android.package-archive\"</span>);</span><br><span class=\"line\">        activity.startActivity(intent);</span><br><span class=\"line\">        <span class=\"comment\">// android.os.Process.killProcess(android.os.Process.myPid());</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"http://onkk8h635.bkt.clouddn.com/android/DownInstallApk.rar\" target=\"_blank\" rel=\"noopener\">demo下载&gt;&gt;</a></p>\n","more":"<h3 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h3><p>未整理完，暂且不写，日后更新</p>\n<h3 id=\"安装应用\"><a href=\"#安装应用\" class=\"headerlink\" title=\"安装应用\"></a>安装应用</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 安装 APK</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> activity</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileUri 安装包地址</span></span><br><span class=\"line\"><span class=\"comment\">     * fileUri = Uri.parse(\"file://\" + filePath); 或</span></span><br><span class=\"line\"><span class=\"comment\">     * fileUri = Uri.fromFile(File file);</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">installApk</span><span class=\"params\">(Activity activity, Uri fileUri)</span> </span>&#123;</span><br><span class=\"line\">        Intent intent = <span class=\"keyword\">new</span> Intent();</span><br><span class=\"line\">        <span class=\"comment\">//执行动作</span></span><br><span class=\"line\">        intent.setAction(Intent.ACTION_VIEW);</span><br><span class=\"line\">        <span class=\"comment\">// 如果不加无法正常显示安装过程和安装成功提示</span></span><br><span class=\"line\">        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class=\"line\">        <span class=\"comment\">//执行的数据类型</span></span><br><span class=\"line\">        intent.setDataAndType(fileUri, <span class=\"string\">\"application/vnd.android.package-archive\"</span>);</span><br><span class=\"line\">        activity.startActivity(intent);</span><br><span class=\"line\">        <span class=\"comment\">// android.os.Process.killProcess(android.os.Process.myPid());</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"http://onkk8h635.bkt.clouddn.com/android/DownInstallApk.rar\" target=\"_blank\" rel=\"noopener\">demo下载&gt;&gt;</a></p>\n","categories":[],"tags":[{"name":"Android","path":"api/tags/Android.json"}]}